define(["TFS/WorkItemTracking/RestClient","VSS/Context","VSS/Controls/Dialogs"],function(e,n,t){return function(e){function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(n,t){n.exports=e},,function(e,t){e.exports=n},function(e,n){e.exports=t},,,function(e,n,t){var i,s;i=[t,n,t(2),t(0),t(3)],void 0!==(s=function(e,n,t,i,s){"use strict";function c(e){h&&$("#selected-"+h.name.sanitize()).removeClass("selected"),h=y.filter(function(n){return n.name===e})[0],$("#selected-"+e.sanitize()).addClass("selected")}function a(e){x&&$("#all-"+x.name.sanitize()).removeClass("selected"),x=z.filter(function(n){return n.name===e})[0],$("#all-"+e.sanitize()).addClass("selected")}function l(e){var n=y.slice();u(),x=null,h=null,v.then(function(t){t.setValue(d,n,{scopeType:"user"}).then(function(){o(e)})})}function o(e){if(O)var n=s.show(s.ModalDialog,{title:"Unsaved Changes",content:$("<p/>").addClass("confirmation-text").html("Do you want to save changes for <b>"+m.name+"</b>?"),buttons:{Save:function(){l(e),n.close()},No:function(){u(),x=null,h=null,o(e),n.close()},Cancel:function(){n.close()}}});else m&&$("#type-"+m.name.sanitize()).removeClass("selected"),m=L.filter(function(n){return n.name===e})[0],$("#type-"+e.sanitize()).addClass("selected"),d="wiprint-"+m.name.sanitize(),$("#allList").html(""),z.splice(0,z.length),$("#selectedList").html(""),y.splice(0,y.length),v.then(function(e){e.getValue(d,{scopeType:"user"}).then(function(e){e&&e.length>0?(e.forEach(function(e){null!==e&&y.push(e)}),p()):$("#selectedList").append('<li class="ms-ListItem"><span class="ms-ListItem-secondaryText">No Saved Data</span></li>')}).then(function(){m.fieldInstances.filter(function(e){for(var n=0,t=y.length;n<t;n++)if(e.referenceName===y[n].referenceName)return!1;return!0}).forEach(function(e){z.push(e)}),f()})})}function r(){O||(O=!0,$("#save").prop("disabled",!1),$("#cancel").prop("disabled",!1))}function u(){O=!1,$("#save").prop("disabled",!0),$("#cancel").prop("disabled",!0)}function f(){$("#allList").html(""),z.sort(function(e,n){return e.name>n.name?1:-1}).forEach(function(e){$("#allList").append('<li id="all-'+e.name.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.name+"</span></li>"),$("#all-"+e.name.sanitize()).click(function(n){a(e.name)})})}function p(){$("#selectedList").html(""),y.forEach(function(e){$("#selectedList").append('<li id="selected-'+e.name.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.name+"</span></li>"),$("#selected-"+e.name.sanitize()).click(function(n){c(e.name)})})}Object.defineProperty(n,"__esModule",{value:!0});var d,m,h,x,g=t.getDefaultWebContext(),v=VSS.getService(VSS.ServiceIds.ExtensionData),k=i.getClient(),z=[],y=[],L=[],O=!1;u(),k.getWorkItemTypes(g.project.name).then(function(e){e.forEach(function(e){L.push(e),$("#typesList").append('<li id="type-'+e.name.sanitize()+'" class="ms-ListItem">'+(e.color?'<span class="ms-ListItem-image" style="background-color: #'+e.color+'"></span>':"")+'<span class="ms-ListItem-primaryText">'+e.name+'</span><span class="ms-ListItem-secondaryText">'+e.description+"</span></li>"),$("#type-"+e.name.sanitize()).click(function(n){o(e.name)})})}),$("#save").click(function(e){return l(m.name)}),$("#cancel").click(function(e){u(),o(m.name)}),$("#push").click(function(e){if(x){var n=z.indexOf(x),t=-1===y.indexOf(h)?y.length-1:y.indexOf(h);z.splice(n,1),y.splice(t+1,0,x),f(),z.length>0?$("#all-"+z[z[n]?n:n-1].name.sanitize()).click():x=null,p(),$("#selected-"+y[y[t+1]?t+1:t].name.sanitize()).click(),r()}}),$("#pop").click(function(e){if(h){var n=y.indexOf(h);y.splice(n,1),z.push(h),p(),f(),$("#all-"+z[z.indexOf(h)].name.sanitize()).click(),y.length>0?$("#selected-"+y[y[n]?n:n-1].name.sanitize()).click():h=null,r()}}),$("#top").click(function(e){h&&y.indexOf(h)>0&&(y.splice(y.indexOf(h),1),y.unshift(h),p(),$("#selected-"+y[0].name.sanitize()).click())}),$("#bottom").click(function(e){h&&y.indexOf(h)<y.length&&(y.splice(y.indexOf(h),1),y.push(h),p(),$("#selected-"+y[y.length-1].name.sanitize()).click())}),$("#up").click(function(e){if(h&&y.indexOf(h)>0){var n=y.indexOf(h);y.splice(n,1),y.splice(n-1,0,h),p(),$("#selected-"+y[n-1].name.sanitize()).click()}}),$("#down").click(function(e){if(h&&y.indexOf(h)<y.length){var n=y.indexOf(h);y.splice(n,1),y.splice(n+1,0,h),p(),$("#selected-"+y[y[n+1]?n+1:n].name.sanitize()).click()}}),String.prototype.sanitize=function(){return this.replace(/\s/g,"-").replace(/[^a-z0-9]/gi,"")}}.apply(n,i))&&(e.exports=s)}])});
//# sourceMappingURL=wiprint-admin.js.map