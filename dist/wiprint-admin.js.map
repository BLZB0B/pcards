{"version":3,"sources":["webpack:///wiprint-admin.js","webpack:///webpack/bootstrap 6192c0e6b7d2e03eb019?b20d","webpack:///external \"TFS/WorkItemTracking/RestClient\"?9a50","webpack:///external \"VSS/Context\"","webpack:///external \"VSS/Controls/Dialogs\"","webpack:///./src/wiprint-admin.ts"],"names":["define","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","Context","WITClient","Dialogs","selectSelected","activeSelected","$","sanitize","removeClass","selectedFields","filter","field","addClass","selectAll","activeAll","allFields","type","save","saveFields","slice","makeClean","dataService","then","service","setValue","key","scopeType","refreshData","dirty","dialog_1","show","ModalDialog","title","content","html","activeType","buttons","Save","close","No","Cancel","types","splice","length","getValue","data","forEach","push","populateSelected","append","fieldInstances","len","referenceName","populateAll","makeDirty","prop","sort","a","b","click","e","dblclick","scroll","child","parent","scrollTop","offset","top","tfsContext","getDefaultWebContext","VSS","getService","ServiceIds","ExtensionData","witClient","getClient","getWorkItemTypes","project","witypes","color","description","allIndex","indexOf","selectedIndex","unshift","index","String","this","replace","apply"],"mappings":"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","file":"wiprint-admin.js","sourcesContent":["define([\"TFS/WorkItemTracking/RestClient\",\"VSS/Context\",\"VSS/Controls/Dialogs\"], function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */,\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(0), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Context, WITClient, Dialogs) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var tfsContext = Context.getDefaultWebContext();\n    var dataService = VSS.getService(VSS.ServiceIds.ExtensionData);\n    var witClient = WITClient.getClient();\n    var allFields = [];\n    var selectedFields = [];\n    var types = [];\n    var key;\n    var dirty = false;\n    var activeType;\n    var activeSelected;\n    var activeAll;\n    var typesList;\n    function selectSelected(name) {\n        if (activeSelected) {\n            $(\"#selected-\" + activeSelected.name.sanitize()).removeClass(\"selected\");\n        }\n        activeSelected = selectedFields.filter(function (field) {\n            return field.name === name;\n        })[0];\n        $(\"#selected-\" + name.sanitize()).addClass(\"selected\");\n    }\n    function selectAll(name) {\n        if (activeAll) {\n            $(\"#all-\" + activeAll.name.sanitize()).removeClass(\"selected\");\n        }\n        activeAll = allFields.filter(function (type) {\n            return type.name === name;\n        })[0];\n        $(\"#all-\" + name.sanitize()).addClass(\"selected\");\n    }\n    makeClean();\n    witClient.getWorkItemTypes(tfsContext.project.name).then(function (witypes) {\n        witypes.forEach(function (type) {\n            types.push(type);\n            $(\"#typesList\").append(\"<li id=\\\"type-\" + type.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (type.color\n                    ? \"<span class=\\\"ms-ListItem-image\\\" style=\\\"background-color: #\" + type.color + \"\\\"></span>\"\n                    : \"\") +\n                (\"<span class=\\\"ms-ListItem-primaryText\\\">\" + type.name + \"</span>\") +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + type.description + \"</span>\") +\n                \"</li>\");\n            $(\"#type-\" + type.name.sanitize()).click(function (e) {\n                refreshData(type.name);\n            });\n        });\n    });\n    $(\"#save\").click(function (e) { return save(activeType.name); });\n    $(\"#cancel\").click(function (e) {\n        makeClean();\n        refreshData(activeType.name);\n    });\n    function save(name) {\n        var saveFields = selectedFields.slice();\n        makeClean();\n        activeAll = null;\n        activeSelected = null;\n        dataService.then(function (service) {\n            service.setValue(key, saveFields, { scopeType: \"user\" }).then(function () {\n                refreshData(name);\n            });\n        });\n    }\n    function refreshData(name) {\n        if (dirty) {\n            var dialog_1 = Dialogs.show(Dialogs.ModalDialog, {\n                title: \"Unsaved Changes\",\n                content: $(\"<p/>\")\n                    .addClass(\"confirmation-text\")\n                    .html(\"Do you want to save changes for <b>\" + activeType.name + \"</b>?\"),\n                buttons: {\n                    Save: function () {\n                        save(name);\n                        dialog_1.close();\n                    },\n                    No: function () {\n                        makeClean();\n                        activeAll = null;\n                        activeSelected = null;\n                        refreshData(name);\n                        dialog_1.close();\n                    },\n                    Cancel: function () {\n                        dialog_1.close();\n                    }\n                }\n            });\n        }\n        else {\n            if (activeType) {\n                $(\"#type-\" + activeType.name.sanitize()).removeClass(\"selected\");\n            }\n            activeType = types.filter(function (type) {\n                return type.name === name;\n            })[0];\n            $(\"#type-\" + name.sanitize()).addClass(\"selected\");\n            key = \"wiprint-\" + activeType.name.sanitize();\n            $(\"#allList\").html(\"\");\n            allFields.splice(0, allFields.length);\n            $(\"#selectedList\").html(\"\");\n            selectedFields.splice(0, selectedFields.length);\n            dataService.then(function (service) {\n                service\n                    .getValue(key, { scopeType: \"user\" })\n                    .then(function (data) {\n                    if (data && data.length > 0) {\n                        data.forEach(function (field) {\n                            if (field !== null) {\n                                selectedFields.push(field);\n                            }\n                        });\n                        populateSelected();\n                    }\n                    else {\n                        $(\"#selectedList\").append(\"<li class=\\\"ms-ListItem\\\">\" +\n                            \"<span class=\\\"ms-ListItem-secondaryText\\\">No Saved Data</span>\" +\n                            \"</li>\");\n                    }\n                })\n                    .then(function () {\n                    activeType.fieldInstances\n                        .filter(function (field) {\n                        for (var i = 0, len = selectedFields.length; i < len; i++) {\n                            if (field.referenceName === selectedFields[i].referenceName) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    })\n                        .forEach(function (field) {\n                        allFields.push(field);\n                    });\n                    populateAll();\n                });\n            });\n        }\n    }\n    function makeDirty() {\n        if (!dirty) {\n            dirty = true;\n            $(\"#save\").prop(\"disabled\", false);\n            $(\"#cancel\").prop(\"disabled\", false);\n        }\n    }\n    function makeClean() {\n        dirty = false;\n        $(\"#save\").prop(\"disabled\", true);\n        $(\"#cancel\").prop(\"disabled\", true);\n        activeAll = null;\n        activeSelected = null;\n    }\n    function populateAll() {\n        $(\"#allList\").html(\"\");\n        allFields.sort(function (a, b) { return (a.name > b.name ? 1 : -1); }).forEach(function (field) {\n            $(\"#allList\").append(\"<li id=\\\"all-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\n                \"</li>\");\n            $(\"#all-\" + field.name.sanitize())\n                .click(function (e) {\n                selectAll(field.name);\n            })\n                .dblclick(function (e) {\n                $(\"#push\").click();\n            });\n        });\n    }\n    function populateSelected() {\n        $(\"#selectedList\").html(\"\");\n        selectedFields.forEach(function (field) {\n            $(\"#selectedList\").append(\"<li id=\\\"selected-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\n                \"</li>\");\n            $(\"#selected-\" + field.name.sanitize())\n                .click(function (e) {\n                selectSelected(field.name);\n            })\n                .dblclick(function (e) {\n                $(\"#pop\").click();\n            });\n        });\n    }\n    $(\"#push\").click(function (e) {\n        if (activeAll) {\n            var allIndex = allFields.indexOf(activeAll);\n            var selectedIndex = selectedFields.indexOf(activeSelected) === -1\n                ? selectedFields.length - 1\n                : selectedFields.indexOf(activeSelected);\n            allFields.splice(allIndex, 1);\n            selectedFields.splice(selectedIndex + 1, 0, activeAll);\n            populateAll();\n            if (allFields.length > 0) {\n                $(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()).click();\n                scroll($(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()));\n            }\n            else {\n                activeAll = null;\n            }\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#pop\").click(function (e) {\n        if (activeSelected) {\n            var selectedIndex = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(selectedIndex, 1);\n            allFields.push(activeSelected);\n            populateSelected();\n            populateAll();\n            $(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()).click();\n            scroll($(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()));\n            if (selectedFields.length > 0) {\n                $(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()).click();\n                scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()));\n            }\n            else {\n                activeSelected = null;\n            }\n            makeDirty();\n        }\n    });\n    $(\"#top\").click(function (e) {\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\n            selectedFields.unshift(activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[0].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[0].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#bottom\").click(function (e) {\n        if (activeSelected &&\n            selectedFields.indexOf(activeSelected) < selectedFields.length) {\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\n            selectedFields.push(activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#up\").click(function (e) {\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\n            var index = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(index, 1);\n            selectedFields.splice(index - 1, 0, activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[index - 1].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[index - 1].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#down\").click(function (e) {\n        if (activeSelected &&\n            selectedFields.indexOf(activeSelected) < selectedFields.length) {\n            var index = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(index, 1);\n            selectedFields.splice(index + 1, 0, activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()));\n            makeDirty();\n        }\n    });\n    String.prototype.sanitize = function () {\n        return this.replace(/\\s/g, \"-\").replace(/[^a-z0-9\\-]/gi, \"\");\n    };\n    function scroll(child) {\n        var parent = child.parent();\n        parent.scrollTop(child.offset().top - parent.offset().top + parent.scrollTop() - 296);\n    }\n}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])});;\n\n\n// WEBPACK FOOTER //\n// wiprint-admin.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6192c0e6b7d2e03eb019","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"TFS/WorkItemTracking/RestClient\"\n// module id = 0\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"VSS/Context\"\n// module id = 2\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"VSS/Controls/Dialogs\"\n// module id = 3\n// module chunks = 1","define([\"require\", \"exports\", \"VSS/Context\", \"TFS/WorkItemTracking/RestClient\", \"VSS/Controls/Dialogs\"], function (require, exports, Context, WITClient, Dialogs) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var tfsContext = Context.getDefaultWebContext();\n    var dataService = VSS.getService(VSS.ServiceIds.ExtensionData);\n    var witClient = WITClient.getClient();\n    var allFields = [];\n    var selectedFields = [];\n    var types = [];\n    var key;\n    var dirty = false;\n    var activeType;\n    var activeSelected;\n    var activeAll;\n    var typesList;\n    function selectSelected(name) {\n        if (activeSelected) {\n            $(\"#selected-\" + activeSelected.name.sanitize()).removeClass(\"selected\");\n        }\n        activeSelected = selectedFields.filter(function (field) {\n            return field.name === name;\n        })[0];\n        $(\"#selected-\" + name.sanitize()).addClass(\"selected\");\n    }\n    function selectAll(name) {\n        if (activeAll) {\n            $(\"#all-\" + activeAll.name.sanitize()).removeClass(\"selected\");\n        }\n        activeAll = allFields.filter(function (type) {\n            return type.name === name;\n        })[0];\n        $(\"#all-\" + name.sanitize()).addClass(\"selected\");\n    }\n    makeClean();\n    witClient.getWorkItemTypes(tfsContext.project.name).then(function (witypes) {\n        witypes.forEach(function (type) {\n            types.push(type);\n            $(\"#typesList\").append(\"<li id=\\\"type-\" + type.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (type.color\n                    ? \"<span class=\\\"ms-ListItem-image\\\" style=\\\"background-color: #\" + type.color + \"\\\"></span>\"\n                    : \"\") +\n                (\"<span class=\\\"ms-ListItem-primaryText\\\">\" + type.name + \"</span>\") +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + type.description + \"</span>\") +\n                \"</li>\");\n            $(\"#type-\" + type.name.sanitize()).click(function (e) {\n                refreshData(type.name);\n            });\n        });\n    });\n    $(\"#save\").click(function (e) { return save(activeType.name); });\n    $(\"#cancel\").click(function (e) {\n        makeClean();\n        refreshData(activeType.name);\n    });\n    function save(name) {\n        var saveFields = selectedFields.slice();\n        makeClean();\n        activeAll = null;\n        activeSelected = null;\n        dataService.then(function (service) {\n            service.setValue(key, saveFields, { scopeType: \"user\" }).then(function () {\n                refreshData(name);\n            });\n        });\n    }\n    function refreshData(name) {\n        if (dirty) {\n            var dialog_1 = Dialogs.show(Dialogs.ModalDialog, {\n                title: \"Unsaved Changes\",\n                content: $(\"<p/>\")\n                    .addClass(\"confirmation-text\")\n                    .html(\"Do you want to save changes for <b>\" + activeType.name + \"</b>?\"),\n                buttons: {\n                    Save: function () {\n                        save(name);\n                        dialog_1.close();\n                    },\n                    No: function () {\n                        makeClean();\n                        activeAll = null;\n                        activeSelected = null;\n                        refreshData(name);\n                        dialog_1.close();\n                    },\n                    Cancel: function () {\n                        dialog_1.close();\n                    }\n                }\n            });\n        }\n        else {\n            if (activeType) {\n                $(\"#type-\" + activeType.name.sanitize()).removeClass(\"selected\");\n            }\n            activeType = types.filter(function (type) {\n                return type.name === name;\n            })[0];\n            $(\"#type-\" + name.sanitize()).addClass(\"selected\");\n            key = \"wiprint-\" + activeType.name.sanitize();\n            $(\"#allList\").html(\"\");\n            allFields.splice(0, allFields.length);\n            $(\"#selectedList\").html(\"\");\n            selectedFields.splice(0, selectedFields.length);\n            dataService.then(function (service) {\n                service\n                    .getValue(key, { scopeType: \"user\" })\n                    .then(function (data) {\n                    if (data && data.length > 0) {\n                        data.forEach(function (field) {\n                            if (field !== null) {\n                                selectedFields.push(field);\n                            }\n                        });\n                        populateSelected();\n                    }\n                    else {\n                        $(\"#selectedList\").append(\"<li class=\\\"ms-ListItem\\\">\" +\n                            \"<span class=\\\"ms-ListItem-secondaryText\\\">No Saved Data</span>\" +\n                            \"</li>\");\n                    }\n                })\n                    .then(function () {\n                    activeType.fieldInstances\n                        .filter(function (field) {\n                        for (var i = 0, len = selectedFields.length; i < len; i++) {\n                            if (field.referenceName === selectedFields[i].referenceName) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    })\n                        .forEach(function (field) {\n                        allFields.push(field);\n                    });\n                    populateAll();\n                });\n            });\n        }\n    }\n    function makeDirty() {\n        if (!dirty) {\n            dirty = true;\n            $(\"#save\").prop(\"disabled\", false);\n            $(\"#cancel\").prop(\"disabled\", false);\n        }\n    }\n    function makeClean() {\n        dirty = false;\n        $(\"#save\").prop(\"disabled\", true);\n        $(\"#cancel\").prop(\"disabled\", true);\n        activeAll = null;\n        activeSelected = null;\n    }\n    function populateAll() {\n        $(\"#allList\").html(\"\");\n        allFields.sort(function (a, b) { return (a.name > b.name ? 1 : -1); }).forEach(function (field) {\n            $(\"#allList\").append(\"<li id=\\\"all-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\n                \"</li>\");\n            $(\"#all-\" + field.name.sanitize())\n                .click(function (e) {\n                selectAll(field.name);\n            })\n                .dblclick(function (e) {\n                $(\"#push\").click();\n            });\n        });\n    }\n    function populateSelected() {\n        $(\"#selectedList\").html(\"\");\n        selectedFields.forEach(function (field) {\n            $(\"#selectedList\").append(\"<li id=\\\"selected-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\n                \"</li>\");\n            $(\"#selected-\" + field.name.sanitize())\n                .click(function (e) {\n                selectSelected(field.name);\n            })\n                .dblclick(function (e) {\n                $(\"#pop\").click();\n            });\n        });\n    }\n    $(\"#push\").click(function (e) {\n        if (activeAll) {\n            var allIndex = allFields.indexOf(activeAll);\n            var selectedIndex = selectedFields.indexOf(activeSelected) === -1\n                ? selectedFields.length - 1\n                : selectedFields.indexOf(activeSelected);\n            allFields.splice(allIndex, 1);\n            selectedFields.splice(selectedIndex + 1, 0, activeAll);\n            populateAll();\n            if (allFields.length > 0) {\n                $(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()).click();\n                scroll($(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()));\n            }\n            else {\n                activeAll = null;\n            }\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#pop\").click(function (e) {\n        if (activeSelected) {\n            var selectedIndex = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(selectedIndex, 1);\n            allFields.push(activeSelected);\n            populateSelected();\n            populateAll();\n            $(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()).click();\n            scroll($(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()));\n            if (selectedFields.length > 0) {\n                $(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()).click();\n                scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()));\n            }\n            else {\n                activeSelected = null;\n            }\n            makeDirty();\n        }\n    });\n    $(\"#top\").click(function (e) {\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\n            selectedFields.unshift(activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[0].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[0].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#bottom\").click(function (e) {\n        if (activeSelected &&\n            selectedFields.indexOf(activeSelected) < selectedFields.length) {\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\n            selectedFields.push(activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#up\").click(function (e) {\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\n            var index = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(index, 1);\n            selectedFields.splice(index - 1, 0, activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[index - 1].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[index - 1].name.sanitize()));\n            makeDirty();\n        }\n    });\n    $(\"#down\").click(function (e) {\n        if (activeSelected &&\n            selectedFields.indexOf(activeSelected) < selectedFields.length) {\n            var index = selectedFields.indexOf(activeSelected);\n            selectedFields.splice(index, 1);\n            selectedFields.splice(index + 1, 0, activeSelected);\n            populateSelected();\n            $(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()).click();\n            scroll($(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()));\n            makeDirty();\n        }\n    });\n    String.prototype.sanitize = function () {\n        return this.replace(/\\s/g, \"-\").replace(/[^a-z0-9\\-]/gi, \"\");\n    };\n    function scroll(child) {\n        var parent = child.parent();\n        parent.scrollTop(child.offset().top - parent.offset().top + parent.scrollTop() - 296);\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/wiprint-admin.ts\n// module id = 6\n// module chunks = 1"],"sourceRoot":""}